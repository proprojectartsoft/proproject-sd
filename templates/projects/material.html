<ion-view hide-back-button="true" cache-view="false" overflow-scroll="true">
    <div class="bar bar-subheader bar-calm" ng-click="vm.go('materials')">
        <button class="button button-icon ion-ios-arrow-left sd-text-white">
            <span class="bold" style="margin-left:10px;">Plant and materials used</span>
        </button>
    </div>
    <ion-content class="has-subheader sd-form sd-form-withfields">
        <div class="sd-group">
            Plant and materials used
        </div>
        <div class="sd-container">
            <label class="sd-label">
                <div class="sd-title">Resource</div>
                <div class="showSearch" ng-click="((vm.diaryId && vm.editMode) || !(vm.diaryId)) && vm.showSearch()">
                  <input placeholder="{{(!vm.diaryId || vm.editMode) && 'Tap to add resource' ||''}}" ng-readonly=true ng-model="vm.material.name">
                </div>
            </label>
            <label class="sd-label">
                <div class="sd-title">Description</div>
                <textarea ng-model="vm.material.description" placeholder="{{(!vm.diaryId || vm.editMode) && 'Tap to add a description' ||''}}" ng-readonly="(vm.diaryId) && (!vm.editMode)" rows='2'></textarea>
            </label>
            <label class="sd-label">
                <div class="sd-title">Quantity</div>
                <input type="tel" ng-change="vm.compute()" placeholder="{{(!vm.diaryId || vm.editMode) && 'Tap to add quantity' ||''}}" ng-readonly="(vm.diaryId) && (!vm.editMode)" ng-model="vm.material.quantity">
            </label>
            <label class="sd-label">
                <div class="sd-title">Unit</div>
                <div class="showSearch" ng-click="((vm.diaryId && vm.editMode) || !(vm.diaryId)) && vm.showSearchUnit()">
                  <input placeholder="{{(!vm.diaryId || vm.editMode) && 'Tap to add unit' ||''}}" ng-readonly=true ng-model="vm.material.unit_name">
                </div>
            </label>
            <label class="sd-label">
                <div class="sd-title">Cost per unit</div>
                <input ng-change="vm.compute()" type="number" placeholder="Tap to add cost per unit ({{vm.currency}})" ng-if="((vm.diaryId) && (vm.editMode)) || !(vm.diaryId)" ng-model="vm.material.cost_per_unit">
                <input ng-readonly=true ng-if="(vm.diaryId) && (!vm.editMode)" ng-model="vm.material.unitCost_formated">
            </label>
            <label class="sd-label">
                <div class="sd-title">Subtotal cost</div>
                <input placeholder="{{(!vm.diaryId || vm.editMode) && ('Subtotal cost (' + vm.currency + ')') ||''}}" ng-readonly=true value="{{vm.subtotal_formated}}" ng-model="vm.subtotal_formated">
            </label>
            <label class="sd-label">
                <div class="sd-title">Tax</div>
                <input ng-change="vm.compute()" type="number" placeholder="Tap to add tax (%)" ng-if="((vm.diaryId) && (vm.editMode)) || !(vm.diaryId)" ng-model="vm.material.tax">
                <input ng-readonly=true ng-if="(vm.diaryId) && (!vm.editMode)" ng-model="vm.material.tax_formated">
            </label>
            <label class="sd-label">
                <div class="sd-title">Total</div>
                <input placeholder="{{(!vm.diaryId || vm.editMode) && ('Total cost (' + vm.currency + ')') ||''}}" ng-readonly=true value="{{vm.total_formated}}" ng-model="vm.total_formated">
            </label>
        </div>
    </ion-content>
</ion-view>
